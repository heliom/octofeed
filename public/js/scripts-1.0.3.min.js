(function(){var a;$.fn.onClickOrTouch=function(b){if(window.ontouchend!==void 0){this.each(function(){return this._touchMoveCount=0});this.on("click",function(){return false});this.on("touchmove",function(){return this._touchMoveCount++});return this.on("touchend",function(c){if(this._touchMoveCount<3){b.call(this,c)}return this._touchMoveCount=0})}else{return this.on("click",b)}};a=(function(){function b(){this.cache={};this.initMoreBtn();this.setReposIcon($(".repo-group"))}b.prototype.initMoreBtn=function(){var d,c,e=this;d=$(".more");c=d.data("url-pattern");return d.onClickOrTouch(function(g){var f;if(d.hasClass("loading")){return false}g.preventDefault();d.addClass("loading");f=d.attr("href");return $.get(f,function(j){var i,k,h;i=$(j);k=i[0];h=parseInt(k.getAttribute("content"));d.attr("href",c.replace(":number",h+1));d.before(i.not("meta"));d.removeClass("loading");e.setReposIcon(i.filter(".repo-group"));if(!h){return d.remove()}})})};b.prototype.setReposIcon=function(c){var d=this;return c.each(function(g,k){var e,h,l,j,f;e=$(k);j=e.data("name");h=e.find(".avatar > img");if(d.cache[j]){if(d.cache[j]!=="error"){return h.attr("src",d.cache[j])}}else{f="https://github.com/"+j+"/raw/master/icon.png";l=new Image();l.src=f;$(l).on("load",function(i){h.attr("src",f);return d.cache[j]=f});return $(l).on("error",function(i){return d.cache[j]="error"})}})};return b})();new a}).call(this);